"use strict";sap.ui.define(["sap/m/Dialog","../enums","./SpreadsheetDialogRenderer"],function(e,t,r){"use strict";function a(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const s=t["AvailableOptions"];const i=a(r);const n=e.extend("cc.spreadsheetimporter.v1_1_1.SpreadsheetDialog",{renderer:i,metadata:{properties:{decimalSeparator:{type:"string"},availableOptions:{type:"string[]"},component:{type:"object"}},events:{fileDrop:{parameters:{files:{type:"object[]"}}},decimalSeparatorChanged:{parameters:{decimalSeparator:{type:"string"}}},availableOptionsChanged:{parameters:{availableOptions:{type:"string[]"}}}}},constructor:function t(r,a){e.prototype.constructor.call(this,r,a);this.dropMessageShown=false},onAfterRendering:function t(r){e.prototype.onAfterRendering.call(this,r);const a=this.getDomRef();a.addEventListener("dragover",this.handleDragOver.bind(this),false);a.addEventListener("dragenter",this.handleDragEnter.bind(this),false);a.addEventListener("dragleave",this.handleDragLeave.bind(this),false);a.addEventListener("drop",this.handleFileDrop.bind(this),false)},handleDragOver:function e(t){t.preventDefault();t.stopPropagation();t.dataTransfer.dropEffect="copy";if(!this.dropMessageShown){this.showDropMessage(true)}},handleDragLeave:function e(t){if(!t.currentTarget.contains(t.relatedTarget)){this.showDropMessage(false)}},handleFileDrop:function e(t){t.preventDefault();t.stopPropagation();this.showDropMessage(false);const r=t.dataTransfer.files;this.fireFileDrop({files:r})},handleDragEnter:function e(t){},showDropMessage:function e(t){if(this.dropMessageShown===t){return}let r=this.getDomRef().querySelector(".drop-message");if(!r){r=document.createElement("div");r.className="drop-message";r.textContent=this.getModel("i18n").getResourceBundle().getText("spreadsheetimporter.dropMessage");this.getDomRef().appendChild(r)}r.classList.toggle("visible",t);this.dropMessageShown=t},setDecimalSeparator:function e(t){if(t===","||t==="."){this.setProperty("decimalSeparator",t);this.fireDecimalSeparatorChanged({decimalSeparator:t});return this}else{throw new Error("Decimal separator must be either ',' or '.'")}},setAvailableOptions:function e(t){for(let e of t){if(!Object.values(s).includes(e)){throw new Error("Invalid option: "+e)}}this.setProperty("availableOptions",t);this.fireAvailableOptionsChanged({availableOptions:t});return this},exit:function t(){const r=this.getDomRef();if(r){r.removeEventListener("dragover",this.handleDragOver.bind(this),false);r.removeEventListener("dragleave",this.handleDragLeave.bind(this),false);r.removeEventListener("drop",this.handleFileDrop.bind(this),false)}let a=r?.querySelector(".drop-message");if(a){a.remove()}this.dropMessageShown=false;e.prototype.exit.call(this)}});return n});
//# sourceMappingURL=SpreadsheetDialog.js.map